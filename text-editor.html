<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Texteditor</title>

        <!-- Bulma Framework -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css"
        />
        <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
        <!-- Own CSS -->
        <style>
            /* textarea full screen */
            #editor {
                width: 100%;
                height: 70vh;
                font-family: monospace;
            }

            /* invisible default file upload */
            #fileInput {
                display: none;
            }

            /* cursor when hovering over upload button */
            .file-upload-label {
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <!-- Navigationbar -->
        <nav class="navbar" role="navigation" aria-label="main navigation">
            <div class="navbar-brand">
                <a class="navbar-item" href="index.html">
                    <!-- Back to start -->
                    Back
                </a>

                <!-- Hamburger menu -->
                <a
                    role="button"
                    class="navbar-burger"
                    aria-label="menu"
                    aria-expanded="false"
                    data-target="navbarMenu"
                >
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                </a>
            </div>

            <div id="navbarMenu" class="navbar-menu">
                <div class="navbar-start">
                    <!-- Upload File -->
                    <div class="navbar-item">
                        <label class="button is-primary file-upload-label">
                            <img src="/img/upload.svg">&nbsp;Upload File
                            <input
                                class="file-input"
                                type="file"
                                id="fileInput"
                            />
                        </label>
                    </div>

                    <!-- Download File -->
                    <div class="navbar-item">
                        <button class="button is-primary" id="downloadBtn">
                            <img src="/img/download.svg">&nbsp;Download File
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Textfield -->
        <section class="section">
            <div class="container">
                <textarea
                    class="textarea"
                    id="editor"
                    placeholder="Upload file or start typing ..."
                ></textarea>
            </div>
        </section>

        <!-- JavaScript for File Upload and Download -->
        <script>
            // File Upload
            document
                .getElementById("fileInput")
                .addEventListener("change", function (event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function (e) {
                            document.getElementById("editor").value =
                                e.target.result;
                        };
                        reader.readAsText(file);
                    }
                });

            // File Download
            document
                .getElementById("downloadBtn")
                .addEventListener("click", function () {
                    const text = document.getElementById("editor").value;
                    const blob = new Blob([text], { type: "text/plain" });
                    const link = document.createElement("a");
                    link.href = URL.createObjectURL(blob);
                    link.download = "edited_file.txt";
                    link.click();
                });

            // Hamburger menu toggle
            document.addEventListener("DOMContentLoaded", () => {
                const $navbarBurgers = Array.prototype.slice.call(
                    document.querySelectorAll(".navbar-burger"),
                    0
                );

                if ($navbarBurgers.length > 0) {
                    $navbarBurgers.forEach((el) => {
                        el.addEventListener("click", () => {
                            const target = el.dataset.target;
                            const $target = document.getElementById(target);
                            el.classList.toggle("is-active");
                            $target.classList.toggle("is-active");
                        });
                    });
                }
            });
        </script>
    </body>
</html>
